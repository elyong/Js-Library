!(function (e) { var t = {}; function o (n) { if (t[n]) return t[n].exports; var c = t[n] = {i: n, l: !1, exports: {}}; return e[n].call(c.exports, c, c.exports, o), c.l = !0, c.exports }o.m = e, o.c = t, o.d = function (e, t, n) { o.o(e, t) || Object.defineProperty(e, t, {configurable: !1, enumerable: !0, get: n}) }, o.r = function (e) { Object.defineProperty(e, '__esModule', {value: !0}) }, o.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return o.d(t, 'a', t), t }, o.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, o.p = '', o(o.s = 1) }([function (e, t, o) { 'use strict'; var n = {query: function (e, t) { return (new RegExp('(?:\\?|&)' + e + '=(.*?)(?:&|$)').exec(t) || [])[1] }, serialize: function (e) { var t = []; return e ? e instanceof Object == !1 ? 'not a object' : (Object.keys(e).forEach(function (o) { t.push(encodeURIComponent(o) + '=' + encodeURIComponent(e[o])) }), t = '?' + (t = t.join('&'))) : '' }, $: function (e) { return document.querySelector(e) }, removeNode: function (e) { return e.parentNode.removeChild(e) }, insertAfter: function (e, t) { var o = t.parentNode; o.lastChild === t ? o.appendChild(e) : o.insertBefore(e, t.nextSibling) }, addClass: function (e, t) { e.classList.add(t) }, removeClass: function (e, t) { e.classList.remove(t) }, getAbsoluteUrl: function (e) { var t = document.createElement('a'); return t.href = location.protocol + '//' + location.hostname + e, t.href }, debounce: function (e, t) { var o; return t = t || 300, typeof e === 'function' == !1 ? 'not a function' : function () { o || (o = setTimeout(function () { e(), clearTimeout(o), o = null }, t)) } }, removeItemByIndex: function (e, t) { return e === null || e === ' ' || isNaN(e) ? 'not a number' : t instanceof Array == !1 ? 'not an array' : (t.splice(e, 1), t) }, filter: function (e) { return String(e).replace(/<(script|style|iframe)[^<>]*?>.*?<\/\1>/gi, '').replace(/(onerror|onclick)=([\"\']?)([^\"\'>]*?)\2/gi, '') }, htmlEncode: function (e) { return String(e).replace(/&/g, '&amp;').replace(/"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;') }}; e.exports = n }, function (e, t, o) { 'use strict'; var n = o(0); describe('URL test', function () { test('query', function () { expect(n.query('hello', '?hello=test')).toBe('test'), expect(n.query('hello', '?hello=')).toBe(''), expect(n.query('hello', '?hello2=test')).toBe(void 0), expect(n.query('hello', '?hello=test&hello2=3')).toBe('test'), expect(n.query('hello', '?hello=&hello2=3')).toBe(''), expect(n.query('hello', '?')).toBe(void 0), expect(n.query('hello-test', '?hello-test=test')).toBe('test'), expect(n.query('hello/test', '?hello/test=test')).toBe('test') }), test('serialize', function () { expect(n.serialize('kkk')).toBe('not a object'), expect(n.serialize({key: 'nickname', value: 'hi'})).toBe('?key=nickname&value=hi'), expect(n.serialize()).toBe(''), expect(n.serialize(['f', 'b', 'c'])).toBe('?0=f&1=b&2=c'), expect(n.serialize({key: 'sayhi', value: 'hi'})).not.toBe('?key=nickname&value=hi') }), test('getAbsoluteUrl', function () { expect(n.getAbsoluteUrl('/index')).toBe('about:///index'), expect(n.getAbsoluteUrl('/index')).not.toBe('about:///hello') }) }), describe('DOM test', function () { test('$', function () { document.body.innerHTML = '<div id="jquery">hey</div>', expect(n.$('#jquery').id).toBe('jquery'), expect(n.$('#jquery').innerHTML).toBe('hey'), expect(n.$('#nothing')).toBeNull() }), test('removeNode', function () { document.body.innerHTML = '<div id="p"><p id="c"></p></div>'; var e = document.getElementById('p'); expect(e.nodeName.toLowerCase()).toBe('div'); var t = document.getElementById('c'); n.removeNode(t), expect(document.getElementById('c')).toBeNull(), expect(document.getElementById('p')).not.toBeNull(), expect(document.getElementById('a')).toBeNull(), document.body.innerHTML = '', expect(document.getElementById('ab')).toBeNull() }), test('insertAfter', function () { document.body.innerHTML = '<div id="p"><div id="c"></div></div>'; var e = document.body.querySelector('#c'), t = document.createElement('div'); t.id = 'n', n.insertAfter(t, e), expect(e.nextSibling.id).toBe('n'); var o = document.createElement('div'); o.id = 'nn', n.insertAfter(o, e), expect(e.nextSibling.id).toBe('nn') }), test('addClass', function () { document.body.innerHTML = '<div class="hihihi"></div>'; var e = document.body.querySelector('.hihihi'); n.addClass(e, 'yoyoyo'), expect(e.className).toBe('hihihi yoyoyo'), n.addClass(e, [1, 2]), expect(e.className).toBe('hihihi yoyoyo 1,2') }), test('removeClass', function () { document.body.innerHTML = '<div class="hihihi gg 2,3"></div>'; var e = document.body.querySelector('.gg'); n.removeClass(e, 'gg'), expect(e.className).toBe('hihihi 2,3'), n.removeClass(e, 'hihihi'), expect(e.className).toBe('2,3') }) }), describe('asynchronous test', function () { test('debounce', function (e) { for (var t = 0, o = 0, c = n.debounce(function () { t += 1, expect(t).toBe(1), e() }, 300), i = n.debounce(function () { o += 1, expect(o).toBe(1), e() }), r = 0; r < 10; r++)c(), i(); expect(t).toBe(0), expect(o).toBe(0), setTimeout(function () { e(), expect(t).toBe(10), expect(o(10)) }, 400), expect(n.debounce('abc')).toBe('not a function') }) }), describe('array test', function () { test('removeItemByIndex', function () { expect(n.removeItemByIndex(1, [1, 2, 3])).toEqual([1, 3]), expect(n.removeItemByIndex([1, 2, 3], [1, 2, 3])).toEqual('not a number'), expect(n.removeItemByIndex(1, 123)).toEqual('not an array') }) }), describe('XSS-input-defence test', function () { test('filter', function () { expect(n.filter('<script>alert<\/script><a href="a.com" onclick="alert(1)">test</a>')).toBe('<a href="a.com" >test</a>') }), test('htmlEncode', function () { expect(n.htmlEncode('<script><\/script>')).toBe('&lt;script&gt;&lt;/script&gt;') }) }) }]))
